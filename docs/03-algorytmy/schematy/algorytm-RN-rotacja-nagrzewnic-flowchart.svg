<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 2550" width="1400px" height="2550px">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-no" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
    <marker id="arrowhead-yes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#28a745"/>
    </marker>
    <style>
  .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #1a1a1a; }
  .subtitle { font-family: Arial, sans-serif; font-size: 18px; fill: #555; }
  .box-text { font-family: Arial, sans-serif; font-size: 15px; fill: #1a1a1a; text-anchor: middle; }
  .box-text-small { font-family: Arial, sans-serif; font-size: 13px; fill: #1a1a1a; text-anchor: middle; }
  .box-label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #1a1a1a; }
  .decision { fill: #fff3cd; stroke: #ffc107; stroke-width: 2; }
  .process { fill: #d4edda; stroke: #28a745; stroke-width: 2; }
  .start-end { fill: #cce5ff; stroke: #0066cc; stroke-width: 3; rx: 25; }
  .action { fill: #f8d7da; stroke: #dc3545; stroke-width: 2; }
  .data { fill: #e7f3ff; stroke: #007bff; stroke-width: 2; }
  .warning { fill: #fff3cd; stroke: #ff8800; stroke-width: 2; }
  .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  .arrow-yes { stroke: #28a745; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-yes); }
  .arrow-no { stroke: #dc3545; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-no); }
  .label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #28a745; }
  .label-no { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #dc3545; }
  .note { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }
  .loop { font-family: Arial, sans-serif; font-size: 13px; fill: #0066cc; font-style: italic; }
</style>
  </defs>
  <rect width="1400" height="2550" fill="#ffffff"/>
  <text class="title" x="700" y="40" text-anchor="middle" style="white-space: pre;">Algorytm RN: Rotacja Nagrzewnic w Obrƒôbie CiƒÖgu</text>
  <text class="subtitle" x="700" y="65" text-anchor="middle" style="white-space: pre;">Wyr√≥wnanie Czasu Pracy N1-N8 (Struktura Uproszczona, v2.0)</text>
  <rect class="start-end" x="550" y="90" width="300" height="60"/>
  <text class="box-text" x="700" y="115" style="white-space: pre;">START - G≈Ç√≥wna pƒôtla</text>
  <text class="box-text-small" x="700" y="135" style="white-space: pre;">(co CYKL_PƒòTLI_ALGORYTM√ìW)</text>
  <path d="M 700 150 L 700 200" class="arrow"/>
  <rect class="process" x="500" y="200" width="400" height="80"/>
  <text class="box-text" x="700" y="225" style="white-space: pre;">KROK 0: Aktualizuj liczniki</text>
  <text class="box-text-small" x="700" y="245" style="white-space: pre;">DLA KA≈ªDEJ aktywnej nagrzewnicy:</text>
  <text class="box-text-small" x="700" y="265" style="white-space: pre;">czas_pracy[N] += 1 (lub czas_postoju[N])</text>
  <path d="M 700 280 L 700 340" class="arrow"/>
  <path d="M 700 340 L 830 400 L 700 460 L 570 400 Z" class="decision"/>
  <text class="box-text" x="700" y="390" style="white-space: pre;">KROK 1:</text>
  <text class="box-text-small" x="700" y="410" style="white-space: pre;">Tryb AUTO?</text>
  <path d="M 576.992 400 L 100 400 L 100 2301.76 L 550.828 2301.76" class="arrow-no" style=""/>
  <text class="label-no" x="450" y="390" style="white-space: pre;">NIE</text>
  <text class="note" x="250" y="420" style="white-space: pre;">Tryb MANUAL - algorytm nieaktywny</text>
  <path d="M 700 460 L 700 520" class="arrow-yes"/>
  <text class="label" x="720" y="480" style="white-space: pre;">TAK</text>
  <rect class="process" x="550" y="520" width="300" height="60"/>
  <text class="box-text" x="700" y="545" style="white-space: pre;">KROK 2: DLA KA≈ªDEGO ciƒÖgu</text>
  <text class="box-text-small" x="700" y="565" style="white-space: pre;">w [CIƒÑG1, CIƒÑG2]</text>
  <path d="M 700 580 L 700 640" class="arrow"/>
  <path d="M 700 640 L 900 720 L 700 800 L 500 720 Z" class="decision"/>
  <text class="box-text" x="700" y="700" style="white-space: pre;">KROK 3: CiƒÖg aktywny</text>
  <text class="box-text" x="700" y="720" style="white-space: pre;">w uk≈Çadzie/scenariuszu?</text>
  <text class="box-text-small" x="700" y="740" style="white-space: pre;">(S1-S4: C1/C2, S5-S8: C2)</text>
  <path d="M 503 720 L 200 720 L 200 2285.1 L 551 2285.1" class="arrow-no" style=""/>
  <text class="label-no" x="300" y="710" style="white-space: pre;">NIE</text>
  <text class="note" x="250" y="740" style="white-space: pre;">CiƒÖg wy≈ÇƒÖczony</text>
  <path d="M 700 800 L 700 860" class="arrow-yes"/>
  <text class="label" x="720" y="820" style="white-space: pre;">TAK</text>
  <path d="M 699.825 889.427 L 913.759 954.533 L 699.825 1019.64 L 485.891 954.533 L 699.825 889.427 Z" class="decision" style=""/>
  <text class="box-text" x="700" y="925" style="white-space: pre;">KROK 4:</text>
  <text class="box-text-small" x="700" y="945" style="white-space: pre;">Warunki rotacji spe≈Çnione?</text>
  <text class="box-text-small" x="700" y="965" style="white-space: pre;">(RC nie zmienia, okres OK,</text>
  <text class="box-text-small" x="700" y="985" style="white-space: pre;">stabilno≈õƒá, rezerwowe)</text>
  <path d="M 482.169 954.236 L 300 954.236 L 300 2263.41 L 550 2263.41" class="arrow-no" style=""/>
  <text class="label-no" x="350" y="940" style="white-space: pre;">NIE</text>
  <path d="M 700 1040 L 700 1100" class="arrow-yes"/>
  <text class="label" x="720" y="1060" style="white-space: pre;">TAK</text>
  <path d="M 700 1100 L 870 1170 L 700 1240 L 530 1170 Z" class="decision"/>
  <text class="box-text" x="700" y="1155" style="white-space: pre;">KROK 5:</text>
  <text class="box-text-small" x="700" y="1175" style="white-space: pre;">delta_czasu ‚â•</text>
  <text class="box-text-small" x="700" y="1195" style="white-space: pre;">MIN_DELTA_CZASU?</text>
  <path d="M 530 1170 L 420 1170 L 420 2244.05 L 550 2244.05" class="arrow-no" style=""/>
  <text class="label-no" x="455" y="1149" style="white-space: pre;">NIE</text>
  <text class="note" x="434" y="1195" style="white-space: pre;">R√≥≈ºnica czasu zbyt ma≈Ça</text>
  <path d="M 700 1240 L 700 1300" class="arrow-yes"/>
  <text class="label" x="720" y="1260" style="white-space: pre;">TAK</text>
  <rect class="warning" x="550" y="1300" width="300" height="50"/>
  <text class="box-text-small" x="700" y="1320" style="white-space: pre;">üîí Ustaw blokadƒô:</text>
  <text class="box-text-small" x="700" y="1337" style="white-space: pre;">rotacja_nagrzewnic_w_toku = PRAWDA</text>
  <path d="M 700 1350 L 700 1400" class="arrow"/>
  <rect class="data" x="550" y="1400" width="300" height="50"/>
  <text class="box-text-small" x="700" y="1425" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="700" y="1442" style="white-space: pre;">"Rotacja N_stara ‚Üí N_nowa"</text>
  <path d="M 700 1450 L 700 1510" class="arrow"/>
  <rect class="action" x="500" y="1510" width="400" height="80"/>
  <text class="box-text" x="700" y="1535" style="white-space: pre;">KROK 6: Wykonaj rotacjƒô</text>
  <text class="box-text-small" x="700" y="1555" style="white-space: pre;">Wykonaj_Rotacjƒô_Nagrzewnicy()</text>
  <text class="box-text-small" x="700" y="1575" style="white-space: pre;">(Najpierw za≈ÇƒÖcz N_nowa, potem wy≈ÇƒÖcz N_stara)</text>
  <path d="M 700 1590 L 700 1650" class="arrow"/>
  <rect class="data" x="520" y="1650" width="360" height="90"/>
  <text class="box-text-small" x="700" y="1675" style="white-space: pre;">KROK 7: Aktualizuj stany:</text>
  <text class="box-text-small" x="700" y="1695" style="white-space: pre;">‚Ä¢ nagrzewnice_aktywne[ciƒÖg]</text>
  <text class="box-text-small" x="700" y="1715" style="white-space: pre;">‚Ä¢ czas_ostatniej_rotacji[ciƒÖg]</text>
  <text class="box-text-small" x="700" y="1735" style="white-space: pre;">‚Ä¢ czas_ostatniej_rotacji_globalny</text>
  <path d="M 700 1740 L 700 1800" class="arrow"/>
  <rect class="data" x="550" y="1800" width="300" height="50"/>
  <text class="box-text-small" x="700" y="1825" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="700" y="1842" style="white-space: pre;">"Rotacja zako≈Ñczona pomy≈õlnie"</text>
  <path d="M 700 1850 L 700 1910" class="arrow"/>
  <rect class="warning" x="550" y="1910" width="300" height="50"/>
  <text class="box-text-small" x="700" y="1930" style="white-space: pre;">üîì Zwolnij blokadƒô:</text>
  <text class="box-text-small" x="700" y="1947" style="white-space: pre;">rotacja_nagrzewnic_w_toku = FA≈ÅSZ</text>
  <path d="M 700 1960 L 700 2020" class="arrow"/>
  <path d="M 700 2020 L 870 2090 L 700 2160 L 530 2090 Z" class="decision"/>
  <text class="box-text" x="700" y="2080" style="white-space: pre;">KROK 8:</text>
  <text class="box-text" x="700" y="2100" style="white-space: pre;">Wiƒôcej ciƒÖg√≥w?</text>
  <path d="M 862.747 2090 L 964.724 2090 L 964.724 548 L 850 548" class="arrow-yes" style=""/>
  <text class="label" x="913" y="2078" style="white-space: pre;">TAK</text>
  <path d="M 700 2160 L 700 2230" class="arrow-no"/>
  <text class="label-no" x="720" y="2210" style="white-space: pre;">NIE</text>
  <rect class="process" x="550" y="2230" width="300" height="80"/>
  <text class="box-text" x="699.653" y="2277.06" style="white-space: pre; font-size: 15px;">Czekaj CYKL_PƒòTLI_ALGORYTM√ìW</text>
  <path d="M 850 2280 L 1357 2280 L 1357 120 L 850 120" class="arrow"/>
  <g transform="matrix(1, 0, 0, 1, 954.44091796875, 38.884368896484375)">
    <rect x="20" y="100" width="363.952" height="595.691" fill="#f9f9f9" stroke="#999" stroke-width="1" style=""/>
    <text class="box-label" style="font-size: 17px; white-space: pre;" x="47.037" y="123.813">PARAMETRY:</text>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="186.729" y="142.758">‚Ä¢ CYKL_PƒòTLI_ALGORYTM√ìW = 60s</text>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="181.037" y="162.497">‚Ä¢ OKRES_ROTACJI_NAGRZEWNIC</text>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="132.159" y="179.716">‚Ä¢ MIN_DELTA_CZASU</text>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="196.013" y="199.481">‚Ä¢ CZAS_STABILIZACJI_NAGRZEWNICY</text>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="199.168" y="219.738">‚Ä¢ ODSTƒòP_ROTACJI_GLOBALNY = 900s</text>
    <text class="box-label" style="font-size: 17px; white-space: pre;" x="49.054" y="247.286">ZMIENNE GLOBALNE:</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="98.895" y="270.181">‚Ä¢ aktualny_uk≈Çad</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="127.825" y="289.181">‚Ä¢ zmiana_uk≈Çadu_w_toku</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="150.201" y="307.332">‚Ä¢ czas_ostatniej_zmiany_uk≈Çadu</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="141.428" y="324.87">‚Ä¢ rotacja_nagrzewnic_w_toku</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="151.856" y="343.15">‚Ä¢ czas_ostatniej_rotacji_globalny</text>
    <text class="box-label" style="font-size: 17px; white-space: pre;" x="49.623" y="372.092">ZMIENNE LOKALNE:</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="118.885" y="392.984">‚Ä¢ czas_pracy[N1..N8]</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="124.316" y="412.085">‚Ä¢ czas_postoju[N1..N8]</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="154.034" y="433.471">‚Ä¢ timestamp_zalaczenia[N1..N8]</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="175.63" y="454.808">‚Ä¢ czas_ostatniej_rotacji[CIƒÑG1,CIƒÑG2]</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="148.55" y="473.702">‚Ä¢ nagrzewnice_aktywne[CIƒÑG]</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="108.387" y="495.384">‚Ä¢ last_update_time</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="125.373" y="514.401">‚Ä¢ poprzedni_scenariusz</text>
    <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="106.731" y="534.419">‚Ä¢ poprzedni_uk≈Çad</text>
    <text class="box-label" style="font-size: 17px; white-space: pre;" x="37.786" y="573.715">üîí KOORDYNACJA Z RC:</text>
    <text class="note" style="font-size: 14px; white-space: pre;" x="47.196" y="593.331">‚Ä¢ Blokady zapobiegajƒÖ jednoczesnej</text>
    <text class="note" style="font-size: 14px; white-space: pre;" x="57.196" y="608.331">rotacji uk≈Çad√≥w (RC) i nagrzewnic (RN)</text>
    <text class="note" style="font-size: 14px; white-space: pre;" x="47.196" y="628.331">‚Ä¢ KROK 4: RN sprawdza</text>
    <text class="note" style="font-size: 14px; white-space: pre;" x="57.196" y="643.331">zmiana_uk≈Çadu_w_toku</text>
    <text class="note" style="font-size: 14px; white-space: pre;" x="47.196" y="663.331">‚Ä¢ KROK 6A/7C: RN ustawia/zwalnia</text>
    <text class="note" style="font-size: 14px; white-space: pre;" x="57.196" y="678.331">rotacja_nagrzewnic_w_toku</text>
  </g>
  <rect x="50" y="2360" width="1300" height="160" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text class="note" x="70" y="2385" style="white-space: pre;">LEGENDA:</text>
  <rect class="start-end" x="170" y="2370" width="100" height="35"/>
  <text class="box-text-small" x="220" y="2392" style="white-space: pre;">START/KONIEC</text>
  <rect class="decision" x="290" y="2370" width="60" height="35"/>
  <text class="box-text-small" x="320" y="2392" style="white-space: pre;">Decyzja</text>
  <rect class="process" x="370" y="2370" width="60" height="35"/>
  <text class="box-text-small" x="400" y="2392" style="white-space: pre;">Proces</text>
  <rect class="action" x="450" y="2370" width="80" height="35"/>
  <text class="box-text-small" x="490" y="2392" style="white-space: pre;">Akcja rotacji</text>
  <rect class="data" x="550" y="2370" width="60" height="35"/>
  <text class="box-text-small" x="580" y="2392" style="white-space: pre;">Dane/Log</text>
  <rect class="warning" x="630" y="2370" width="80" height="35"/>
  <text class="box-text-small" x="670" y="2392" style="white-space: pre;">Blokada/Sync</text>
  <text class="note" x="70" y="2425" style="white-space: pre;">UWAGA: Algorytm RN wsp√≥≈Çpracuje z RC poprzez blokady (zmiana_uk≈Çadu_w_toku, rotacja_nagrzewnic_w_toku).</text>
  <text class="note" x="70" y="2445" style="white-space: pre;">KRYTYCZNE: RN ustala blokadƒô PRZED rotacjƒÖ (KROK 6A) i zwalnia PO zako≈Ñczeniu (KROK 7C) - zapobiega konfliktom z RC.</text>
  <text class="note" x="70" y="2465" style="white-space: pre;">ZMIANY v2.0: Zmienne przeniesione do bocznego boxa PARAMETERS (sp√≥jno≈õƒá z WS, RC)</text>
  <text class="note" x="70" y="2485" style="white-space: pre;">Zgodno≈õƒá z pseudokodem v1.7 (src/algo_pseudokod.md, KROK 0-8)</text>
</svg>