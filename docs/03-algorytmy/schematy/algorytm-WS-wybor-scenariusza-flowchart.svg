<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1850" width="900px" height="1850px">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-no" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
    <marker id="arrowhead-yes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#28a745"/>
    </marker>
    <style>
  .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1a1a1a; }
  .subtitle { font-family: Arial, sans-serif; font-size: 16px; fill: #555; }
  .box-text { font-family: Arial, sans-serif; font-size: 15px; fill: #1a1a1a; text-anchor: middle; }
  .box-text-small { font-family: Arial, sans-serif; font-size: 13px; fill: #1a1a1a; text-anchor: middle; }
  .box-label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #1a1a1a; }
  .decision { fill: #fff3cd; stroke: #ffc107; stroke-width: 2; }
  .process { fill: #d4edda; stroke: #28a745; stroke-width: 2; }
  .start-end { fill: #cce5ff; stroke: #0066cc; stroke-width: 3; rx: 25; }
  .action { fill: #f8d7da; stroke: #dc3545; stroke-width: 2; }
  .data { fill: #e7f3ff; stroke: #007bff; stroke-width: 2; }
  .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  .arrow-yes { stroke: #28a745; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-yes); }
  .arrow-no { stroke: #dc3545; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-no); }
  .label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #28a745; }
  .label-no { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #dc3545; }
  .note { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }
    </style>
  </defs>
  <rect width="900" height="1850" fill="white"/>
  <text x="450" y="40" class="title" text-anchor="middle" style="white-space: pre;">Algorytm WS - Struktura Uproszczona</text>
  <text x="450" y="65" class="subtitle" text-anchor="middle" style="white-space: pre;">System BOGDANKA Szyb 2 - Wybór Scenariusza S0-S8 (v1.6)</text>
  <rect x="300" y="100" width="300" height="60" class="start-end"/>
  <text x="450" y="125" class="box-text" style="white-space: pre;">START - Główna pętla</text>
  <text x="450" y="145" class="box-text-small" style="white-space: pre;">(co CYKL_MONITORINGU_TEMP)</text>
  <path d="M 450 160 L 450 200" class="arrow"/>
  <rect x="300" y="200" width="300" height="80" class="process"/>
  <text x="450" y="225" class="box-text" style="white-space: pre;">KROK 0:</text>
  <text x="450" y="245" class="box-text" style="white-space: pre;">Aktualizuj statystyki</text>
  <text x="450" y="265" class="box-text-small" style="white-space: pre;">(czas w scenariuszu, liczniki)</text>
  <path d="M 450 280 L 450 330" class="arrow"/>
  <path d="M 450 330 L 580 390 L 450 450 L 320 390 Z" class="decision"/>
  <text x="450" y="380" class="box-text" style="white-space: pre;">KROK 1:</text>
  <text x="450" y="400" class="box-text-small" style="white-space: pre;">Tryb AUTO?</text>
  <path d="M 321.996 390 L 33.366 390 L 33.366 1664.75 L 285.918 1664.75" class="arrow-no" style=""/>
  <text x="240" y="380" class="label-no" style="white-space: pre;">NIE</text>
  <text x="165" y="420" class="note" style="white-space: pre;">Tryb MANUAL</text>
  <path d="M 450 450 L 450 500" class="arrow-yes"/>
  <text x="470" y="470" class="label" style="white-space: pre;">TAK</text>
  <rect x="300" y="500" width="300" height="80" class="data"/>
  <text x="450" y="525" class="box-text" style="white-space: pre;">KROK 2:</text>
  <text x="450" y="545" class="box-text" style="white-space: pre;">Odczytaj czujnik T_zewn</text>
  <text x="450" y="565" class="box-text-small" style="white-space: pre;">+ filtr uśredniania (3 próbki)</text>
  <path d="M 450 580 L 450 640" class="arrow"/>
  <rect x="300" y="640" width="300" height="80" class="data"/>
  <text x="450" y="665" class="box-text" style="white-space: pre;">KROK 3:</text>
  <text x="450" y="685" class="box-text" style="white-space: pre;">Określ wymagany scenariusz</text>
  <text x="450" y="705" class="box-text-small" style="white-space: pre;">(Progi S0-S8 z histerezą)</text>
  <path d="M 450 720 L 450 780" class="arrow"/>
  <path d="M 450 780 L 580 840 L 450 900 L 320 840 Z" class="decision"/>
  <text x="450" y="830" class="box-text" style="white-space: pre;">KROK 4:</text>
  <text x="450" y="850" class="box-text-small" style="white-space: pre;">Wymagany = Aktualny?</text>
  <text x="450" y="870" class="box-text-small" style="white-space: pre;">+ stabilizacja 60s</text>
  <path d="M 320 840 L 220.022 840 L 220.022 980" class="arrow-no" style=""/>
  <text x="250" y="830" class="label-no" style="white-space: pre;">NIE</text>
  <text x="228.476" y="862.177" class="note" style="white-space: pre; font-size: 12px;">Zmiana wymagana</text>
  <path d="M 580 840 L 820 840 L 820 1645 L 620 1645" class="arrow-yes"/>
  <text x="640" y="830" class="label" style="white-space: pre;">TAK</text>
  <text x="608" y="857" class="note" style="white-space: pre;">Kontynuuj w aktualnym</text>
  <g transform="matrix(1, 0, 0, 1, 32.02680969238281, 0.5132499933242798)">
    <path d="M 188 980 L 318 1040 L 188 1100 L 58 1040 Z" class="decision"/>
    <text x="192.007" y="1020.3" class="box-text" style="font-size: 15px; white-space: pre;">KROK 5:</text>
    <text x="192.007" y="1043.53" class="box-text-small" style="white-space: pre; font-size: 13px;">Brak blokady RC/RN?</text>
    <text x="194.142" y="1061.38" class="box-text-small" style="white-space: pre; font-size: 13px;">(zmiana/rotacja możliwa)</text>
  </g>
  <path d="M 95.348 1040 L 54.506 1040 L 54.506 1629.35 L 289.15 1629.35" class="arrow-no" style=""/>
  <text x="40" y="1030" class="label-no" style="white-space: pre;">NIE</text>
  <text x="61.547" y="1227.38" class="note" style="white-space: pre; font-size: 12px;">Blokada aktywna</text>
  <path d="M 352.387 1039.36 L 562.127 1039.36 L 562.127 1178.34" class="arrow-yes" style=""/>
  <text x="380" y="1030" class="label" style="white-space: pre;">TAK</text>
  <rect x="410" y="1180" width="300" height="80" class="action"/>
  <text x="560" y="1205" class="box-text" style="white-space: pre;">KROK 6:</text>
  <text x="560" y="1225" class="box-text" style="white-space: pre;">Wykonaj zmianę scenariusza</text>
  <text x="560" y="1245" class="box-text-small" style="white-space: pre;">(aktywuj/dezaktywuj nagrzewnice)</text>
  <path d="M 560 1260 L 560 1615" class="arrow"/>
  <rect x="288.833" y="1615" width="327.167" height="60" class="process" style=""/>
  <text x="457" y="1650" class="box-text" style="white-space: pre;">Czekaj CYKL_MONITORINGU_TEMP</text>
  <path d="M 450 1675 L 450 1710 L 850 1710 L 850 130 L 600 130" class="arrow"/>
  <rect x="50" y="1730" width="800" height="100" fill="none" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="60" y="1755" class="box-label" style="white-space: pre;">LEGENDA:</text>
  <rect x="70" y="1770" width="140" height="40" class="start-end"/>
  <text x="140" y="1795" class="box-text-small" style="white-space: pre;">START / KONIEC</text>
  <rect x="230" y="1770" width="140" height="40" class="data"/>
  <text x="300" y="1795" class="box-text-small" style="white-space: pre;">Odczyt / Dane</text>
  <path d="M 450 1770 L 510 1790 L 450 1810 L 390 1790 Z" class="decision"/>
  <text x="450" y="1795" class="box-text-small" style="white-space: pre;">Decyzja</text>
  <rect x="540" y="1770" width="120" height="40" class="action"/>
  <text x="600" y="1795" class="box-text-small" style="white-space: pre;">Akcja</text>
  <rect x="680" y="1770" width="140" height="40" class="process"/>
  <text x="750" y="1795" class="box-text-small" style="white-space: pre;">Proces</text>
  <rect x="8" y="101" width="280" height="198" fill="#f9f9f9" stroke="#999" stroke-width="1"/>
  <text x="18" y="126" class="box-label" style="white-space: pre;">PARAMETRY:</text>
  <text x="109" y="144" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• CYKL_MONITORINGU_TEMP</text>
  <text x="116" y="164" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• FILTR_UŚREDNIANIA (3 próbki)</text>
  <text x="133" y="184" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• CZAS_STABILIZACJI_SCENARIUSZA</text>
  <text x="130" y="203" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• CZAS_UTRZYMANIA_PRZY_AWARII</text>
  <text x="138" y="224" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• ODSTĘP_ZAŁĄCZENIA_NAGRZEWNIC</text>
  <text x="141" y="243" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• ODSTĘP_WYŁĄCZENIA_NAGRZEWNIC</text>
  <text x="127" y="262" class="box-text-small" text-anchor="start" style="font-size: 13px; white-space: pre;">• TIMEOUT_ZMIANY_SCENARIUSZA</text>
  <text x="18" y="282" class="note" style="font-size: 12px; white-space: pre;">Histereza: Temp. wyłączania &gt; Temp. włączania</text>
</svg>