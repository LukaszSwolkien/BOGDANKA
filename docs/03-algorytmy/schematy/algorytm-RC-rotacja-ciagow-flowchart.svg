<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1630 2400" width="1630px" height="2400px">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-no" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
    <marker id="arrowhead-yes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#28a745"/>
    </marker>
    <style>
  .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #1a1a1a; }
  .subtitle { font-family: Arial, sans-serif; font-size: 18px; fill: #555; }
  .box-text { font-family: Arial, sans-serif; font-size: 15px; fill: #1a1a1a; text-anchor: middle; }
  .box-text-small { font-family: Arial, sans-serif; font-size: 13px; fill: #1a1a1a; text-anchor: middle; }
  .box-label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #1a1a1a; }
  .decision { fill: #fff3cd; stroke: #ffc107; stroke-width: 2; }
  .process { fill: #d4edda; stroke: #28a745; stroke-width: 2; }
  .start-end { fill: #cce5ff; stroke: #0066cc; stroke-width: 3; rx: 25; }
  .action { fill: #f8d7da; stroke: #dc3545; stroke-width: 2; }
  .data { fill: #e7f3ff; stroke: #007bff; stroke-width: 2; }
  .warning { fill: #fff3cd; stroke: #ff8800; stroke-width: 2; }
  .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  .arrow-yes { stroke: #28a745; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-yes); }
  .arrow-no { stroke: #dc3545; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-no); }
  .label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #28a745; }
  .label-no { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #dc3545; }
  .note { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }
</style>
  </defs>
  <rect width="1630" height="2400" fill="#ffffff" style=""/>
  <text class="title" x="800" y="40" text-anchor="middle" style="white-space: pre;">Algorytm RC: Rotacja Uk≈Çad√≥w Pracy CiƒÖg√≥w</text>
  <text class="subtitle" x="800" y="65" text-anchor="middle" style="white-space: pre;">Podstawowy ‚Üî Ograniczony (C1 ‚Üî C2)</text>
  <rect class="start-end" x="650" y="90" width="300" height="60"/>
  <text class="box-text" x="800" y="115" style="white-space: pre;">START - G≈Ç√≥wna pƒôtla</text>
  <text class="box-text-small" x="800" y="135" style="white-space: pre;">(co CYKL_PƒòTLI_ALGORYTM√ìW)</text>
  <line class="arrow" x1="800" y1="150" x2="800" y2="200"/>
  <rect class="process" x="600" y="200" width="400" height="70"/>
  <text class="box-text" x="800" y="225" style="white-space: pre;">KROK 0: Aktualizuj liczniki</text>
  <text class="box-text-small" x="800" y="245" style="white-space: pre;">delta_time = czas_systemowy - last_update_time</text>
  <text class="box-text-small" x="800" y="262" style="white-space: pre;">czas_pracy_[aktualny_uk≈Çad] += delta_time</text>
  <line class="arrow" x1="800" y1="270" x2="800" y2="315"/>
  <polygon class="decision" points="800,315 1050,365 800,415 550,365"/>
  <text class="box-text" x="800" y="355" style="white-space: pre;">KROK 1: Tryb AUTO?</text>
  <line class="arrow-no" x1="1050" y1="365" x2="1260" y2="365"/>
  <text class="label-no" x="1100" y="355" style="white-space: pre;">NIE</text>
  <rect class="data" x="1260" y="335" width="240" height="60"/>
  <text class="box-text-small" x="1380" y="355" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="1380" y="375" style="white-space: pre;">"Tryb MANUAL - operator kontroluje"</text>
  <text class="box-text-small" x="1380" y="395" style="white-space: pre;">Czekaj na AUTO</text>
  <path class="arrow" d="M 1500 365 L 1587 365 L 1587 2140 L 950 2140"/>
  <line class="arrow-yes" x1="800" y1="415" x2="800" y2="475"/>
  <text class="label" x="820" y="445" style="white-space: pre;">TAK</text>
  <polygon class="decision" points="800,475 1050,525 800,575 550,525"/>
  <text class="box-text" x="800" y="515" style="white-space: pre;">KROK 2: Pierwsze uruchomienie?</text>
  <text class="box-text-small" x="800" y="532" style="white-space: pre;">(last_update_time = NULL)</text>
  <line class="arrow-yes" x1="1050" y1="525" x2="1265" y2="525"/>
  <text class="label" x="1100" y="515" style="white-space: pre;">TAK</text>
  <rect class="process" x="1265" y="495" width="280" height="60"/>
  <text class="box-text-small" x="1405" y="515" style="white-space: pre;">Inicjalizuj zmienne:</text>
  <text class="box-text-small" x="1405" y="532" style="white-space: pre;">last_update_time = teraz</text>
  <text class="box-text-small" x="1405" y="549" style="white-space: pre;">poprzedni_scenariusz = S</text>
  <path class="arrow" d="M 1507 555 L 1507 2122 L 950 2122"/>
  <line class="arrow-no" x1="800" y1="575" x2="800" y2="635"/>
  <text class="label-no" x="820" y="605" style="white-space: pre;">NIE</text>
  <polygon class="decision" points="800,635 1100,695 800,755 500,695"/>
  <text class="box-text" x="800" y="680" style="white-space: pre;">KROK 3: Przej≈õcie z S0?</text>
  <text class="box-text-small" x="800" y="700" style="white-space: pre;">(poprzedni_scenariusz = S0 ORAZ</text>
  <text class="box-text-small" x="800" y="717" style="white-space: pre;">aktualny ‚àà {S1,S2,S3,S4})</text>
  <line class="arrow-yes" x1="1100" y1="695" x2="1267" y2="695"/>
  <text class="label" x="1135" y="685" style="white-space: pre;">TAK</text>
  <rect class="process" x="1267" y="665" width="180" height="60"/>
  <text class="box-text-small" x="1357" y="685" style="white-space: pre;">Reset timestampu:</text>
  <text class="box-text-small" x="1357" y="702" style="white-space: pre;">czas_ostatniej_zmiany</text>
  <text class="box-text-small" x="1357" y="719" style="white-space: pre;">= czas_systemowy</text>
  <path class="arrow" d="M 1359 725 L 1359 864 L 1050 864"/>
  <line class="arrow-no" x1="800" y1="755" x2="800" y2="815"/>
  <text class="label-no" x="820" y="785" style="white-space: pre;">NIE</text>
  <text class="box-text-small" x="950" y="785" style="white-space: pre;">poprzedni_scenariusz = aktualny</text>
  <polygon class="decision" points="800,815 1050,865 800,915 550,865"/>
  <text class="box-text" x="800" y="855" style="white-space: pre;">KROK 4: Warunki rotacji?</text>
  <text class="box-text-small" x="800" y="872" style="white-space: pre;">(S1-S4, C2 sprawny, AUTO)</text>
  <line class="arrow-no" x1="550" y1="865" x2="462" y2="865"/>
  <text class="label-no" x="499" y="853" style="white-space: pre;">NIE</text>
  <polygon class="decision" points="317,815 462,865 317,915 172,865"/>
  <text class="box-text-small" x="317" y="855" style="white-space: pre;">S1-S4 AND</text>
  <text class="box-text-small" x="317" y="872" style="white-space: pre;">Ograniczony?</text>
  <line class="arrow-yes" x1="317" y1="915" x2="317" y2="981"/>
  <text class="label" x="272" y="954" style="white-space: pre;">TAK</text>
  <rect class="action" x="200" y="981" width="235" height="90"/>
  <text class="box-text-small" style="font-size: 14px; white-space: pre;" x="317.5" y="1002">üö® AWARIA C2</text>
  <text class="box-text-small" x="317.5" y="1019" style="white-space: pre;">Alarm krytyczny:</text>
  <text class="box-text-small" x="317.5" y="1034" style="white-space: pre;">"Awaria C2 w uk≈Çadzie</text>
  <text class="box-text-small" x="317.5" y="1049" style="white-space: pre;">ograniczonym"</text>
  <text class="box-text-small" x="317.5" y="1064" style="white-space: pre;">Prze≈ÇƒÖcz na tryb MANUAL</text>
  <path class="arrow" d="M 317.5 1071 L 317.5 2080 L 647 2080"/>
  <path class="arrow-no" d="M 172 865 L 71 865 L 71 2098 L 650 2098"/>
  <text class="label-no" x="115" y="845" style="white-space: pre;">NIE</text>
  <text class="box-text-small" style="font-size: 14px; white-space: pre;" x="130" y="883">S0/S5-S8</text>
  <line class="arrow-yes" x1="800" y1="915" x2="800" y2="975"/>
  <text class="label" x="820" y="945" style="white-space: pre;">TAK</text>
  <polygon class="decision" points="800,975 1040,1025 800,1075 560,1025"/>
  <text class="box-text" x="800" y="1015" style="white-space: pre;">KROK 5: Up≈ÇynƒÖ≈Ç okres?</text>
  <text class="box-text-small" x="800" y="1032" style="white-space: pre;">(czas ‚â• OKRES - HISTEREZA)</text>
  <path class="arrow-no" d="M 1023 1025 L 1442 1025 L 1442 2107 L 950 2107"/>
  <text class="label-no" x="1200" y="1015" style="white-space: pre;">NIE</text>
  <line class="arrow-yes" x1="800" y1="1075" x2="800" y2="1135"/>
  <text class="label" x="820" y="1105" style="white-space: pre;">TAK</text>
  <rect class="process" x="650" y="1135" width="300" height="70"/>
  <text class="box-text" x="800" y="1160" style="white-space: pre;">KROK 6: Okre≈õl nowy uk≈Çad</text>
  <text class="box-text-small" x="800" y="1180" style="white-space: pre;">Podstawowy ‚Üî Ograniczony</text>
  <line class="arrow" x1="800" y1="1205" x2="800" y2="1260"/>
  <polygon class="decision" points="800,1260 1100,1320 800,1380 500,1320"/>
  <text class="box-text" x="800" y="1310" style="white-space: pre;">KROK 7: RN wykonuje rotacjƒô?</text>
  <text class="box-text-small" x="800" y="1327" style="white-space: pre;">(rotacja_nagrzewnic_w_toku)</text>
  <line class="arrow-yes" x1="1100" y1="1320" x2="1220" y2="1320"/>
  <text class="label" x="1143" y="1306" style="white-space: pre;">TAK</text>
  <rect class="warning" x="1220" y="1290" width="180" height="60"/>
  <text class="box-text-small" x="1310" y="1315" style="white-space: pre;">Odrocz zmianƒô</text>
  <text class="box-text-small" x="1310" y="1332" style="white-space: pre;">(czekaj na RN)</text>
  <path class="arrow" d="M 1324 1350 L 1324 2089 L 950 2089"/>
  <line class="arrow-no" x1="800" y1="1380" x2="800" y2="1440"/>
  <text class="label-no" x="820" y="1410" style="white-space: pre;">NIE</text>
  <rect class="warning" x="650" y="1440" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1460" style="white-space: pre;">üîí Ustaw blokadƒô:</text>
  <text class="box-text-small" x="800" y="1477" style="white-space: pre;">zmiana_uk≈Çadu_w_toku = PRAWDA</text>
  <line class="arrow" x1="800" y1="1490" x2="800" y2="1530"/>
  <rect class="data" x="650" y="1530" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1550" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="800" y="1567" style="white-space: pre;">"Rozpoczƒôcie zmiany uk≈Çadu"</text>
  <line class="arrow" x1="800" y1="1580" x2="800" y2="1620"/>
  <rect class="action" x="600" y="1620" width="400" height="60"/>
  <text class="box-text" x="800" y="1645" style="white-space: pre;">Wykonaj_Zmianƒô_Uk≈Çadu()</text>
  <text class="box-text-small" x="800" y="1665" style="white-space: pre;">Sekwencja zmiany uk≈Çadu Podstawowy ‚Üî Ograniczony</text>
  <line class="arrow" x1="800" y1="1680" x2="800" y2="1730"/>
  <rect class="data" x="600" y="1730" width="400" height="90"/>
  <text class="box-text-small" x="800" y="1755" style="white-space: pre;">Aktualizuj zmienne:</text>
  <text class="box-text-small" x="800" y="1772" style="white-space: pre;">aktualny_uk≈Çad = nowy_uk≈Çad</text>
  <text class="box-text-small" x="800" y="1789" style="white-space: pre;">czas_ostatniej_zmiany = teraz</text>
  <text class="box-text-small" x="800" y="1806" style="white-space: pre;">czas_ostatniej_zmiany_uk≈Çadu = teraz (dla RN)</text>
  <line class="arrow" x1="800" y1="1820" x2="800" y2="1870"/>
  <rect class="data" x="650" y="1870" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1890" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="800" y="1907" style="white-space: pre;">"Zako≈Ñczono zmianƒô uk≈Çadu"</text>
  <line class="arrow" x1="800" y1="1920" x2="800" y2="1970"/>
  <rect class="warning" x="650" y="1970" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1990" style="white-space: pre;">üîì Zwolnij blokadƒô:</text>
  <text class="box-text-small" x="800" y="2007" style="white-space: pre;">zmiana_uk≈Çadu_w_toku = FA≈ÅSZ</text>
  <line class="arrow" x1="800" y1="2020" x2="800" y2="2070"/>
  <rect class="process" x="650" y="2070" width="300" height="80"/>
  <text class="box-text" x="800" y="2105" style="white-space: pre;">Czekaj CYKL_PƒòTLI_ALGORYTM√ìW</text>
  <path class="arrow" d="M 650 2111 L 47 2111 L 47 120 L 650 120"/>
  <g transform="matrix(1, 0, 0, 1, -72.0156478881836, -49.25664901733399)">
    <g>
      <rect x="146.809" y="198.135" width="382.708" height="464.157" fill="#f9f9f9" stroke="#999" stroke-width="1" style="stroke-width: 1;"/>
      <text class="box-label" style="font-size: 17px; white-space: pre;" x="160.029" y="226.682">PARAMETRY:</text>
      <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="273.82" y="282.931">‚Ä¢ CYKL_PƒòTLI_ALGORYTM√ìW</text>
      <text class="box-label" style="font-size: 17px; white-space: pre;" x="157.323" y="318.92">ZMIENNE GLOBALNE:</text>
      <text class="note" style="font-size: 14px; white-space: pre;" x="346.21" y="317.26">(wsp√≥≈Çdzielone z RN)</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="213.256" y="340.309">‚Ä¢ aktualny_uk≈Çad</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="241.599" y="358.438">‚Ä¢ zmiana_uk≈Çadu_w_toku</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="266.083" y="374.888">‚Ä¢ czas_ostatniej_zmiany_uk≈Çadu</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="256.459" y="392.415">‚Ä¢ rotacja_nagrzewnic_w_toku</text>
      <text class="box-label" style="font-size: 17px; white-space: pre;" x="156.759" y="425.678">ZMIENNE LOKALNE:</text>
      <text class="note" style="font-size: 14px; white-space: pre;" x="335.064" y="421.424">(tylko dla RC)</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="281.172" y="445.067">‚Ä¢ czas_pracy_uk≈Çadu_podstawowego</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="281.596" y="462.726">‚Ä¢ czas_pracy_uk≈Çadu_ograniczonego</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="239.555" y="482.295">‚Ä¢ czas_ostatniej_zmiany</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="220.51" y="503.465">‚Ä¢ last_update_time</text>
      <text class="box-text-small" style="font-size: 15px; white-space: pre;" x="235.999" y="524.479">‚Ä¢ poprzedni_scenariusz</text>
      <text class="box-label" style="font-size: 17px; white-space: pre;" x="153.257" y="567.067">üîí KOORDYNACJA Z RN:</text>
      <text class="note" style="font-size: 14px; white-space: pre;" x="160.961" y="590.041">‚Ä¢ Blokady zapobiegajƒÖ jednoczesnej</text>
      <text class="note" style="font-size: 14px; white-space: pre;" x="171.756" y="608.111">rotacji uk≈Çad√≥w (RC) i nagrzewnic (RN)</text>
      <text class="note" style="font-size: 14px; white-space: pre;" x="161.206" y="624.909">‚Ä¢ RC sprawdza</text>
      <text class="note" style="font-size: 14px; white-space: pre;" x="174.646" y="642.648">rotacja_nagrzewnic_w_toku</text>
    </g>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="273.933" y="244.561">‚Ä¢ OKRES_ROTACJI_UK≈ÅAD√ìW</text>
    <text class="box-text-small" style="font-size: 16px; white-space: pre;" x="253.336" y="263.538">‚Ä¢ HISTEREZA_CZASOWA</text>
  </g>
  <rect x="50" y="2200" width="1500" height="140" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text class="note" x="70" y="2220" style="white-space: pre;">Legenda:</text>
  <rect class="decision" x="170" y="2205" width="60" height="30"/>
  <text class="note" x="240" y="2223" style="white-space: pre;">Decyzja</text>
  <rect class="process" x="320" y="2205" width="60" height="30"/>
  <text class="note" x="390" y="2223" style="white-space: pre;">Proces</text>
  <rect class="action" x="470" y="2205" width="60" height="30"/>
  <text class="note" x="540" y="2223" style="white-space: pre;">Akcja zmiany</text>
  <rect class="data" x="630" y="2205" width="60" height="30"/>
  <text class="note" x="700" y="2223" style="white-space: pre;">Dane/Log</text>
  <rect class="warning" x="780" y="2205" width="60" height="30"/>
  <text class="note" x="850" y="2223" style="white-space: pre;">Blokada/Sync</text>
  <text class="note" x="70" y="2265" style="white-space: pre;">üîí Koordynacja z RN: blokady zapobiegajƒÖ jednoczesnej rotacji uk≈Çad√≥w i nagrzewnic</text>
  <text class="note" x="70" y="2285" style="white-space: pre;">ZMIANY v2.0: Zmienne przeniesione do bocznego boxa PARAMETERS (sp√≥jno≈õƒá z WS, RN)</text>
  <text class="note" x="70" y="2305" style="white-space: pre;">Zgodno≈õƒá z pseudokodem v1.7 (src/algo_pseudokod.md, linia 756-988)</text>
</svg>