<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="2.164 -1 1700 2500" width="1700px" height="2500px">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-yes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#28a745"/>
    </marker>
    <marker id="arrowhead-no" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
    <style>
  .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #1a1a1a; }
  .subtitle { font-family: Arial, sans-serif; font-size: 18px; fill: #555; }
  .box-text { font-family: Arial, sans-serif; font-size: 15px; fill: #1a1a1a; text-anchor: middle; }
  .box-text-small { font-family: Arial, sans-serif; font-size: 13px; fill: #1a1a1a; text-anchor: middle; }
  .box-label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #1a1a1a; }
  .decision { fill: #fff3cd; stroke: #ffc107; stroke-width: 2; }
  .process { fill: #d4edda; stroke: #28a745; stroke-width: 2; }
  .start-end { fill: #cce5ff; stroke: #0066cc; stroke-width: 3; rx: 25; }
  .action { fill: #f8d7da; stroke: #dc3545; stroke-width: 2; }
  .data { fill: #e7f3ff; stroke: #007bff; stroke-width: 2; }
  .warning { fill: #fff3cd; stroke: #ff8800; stroke-width: 2; }
  .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  .arrow-yes { stroke: #28a745; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-yes); }
  .arrow-no { stroke: #dc3545; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-no); }
  .label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #28a745; }
  .label-no { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #dc3545; }
  .note { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }
</style>
  </defs>
  <rect width="1700" height="2500" fill="#ffffff" y="-1" x="2.164"/>
  <text class="title" x="800" y="40" text-anchor="middle" style="white-space: pre;">Algorytm RC: Rotacja Uk≈Çad√≥w Pracy CiƒÖg√≥w</text>
  <text class="subtitle" x="800" y="65" text-anchor="middle" style="white-space: pre;">Podstawowy ‚Üî Ograniczony (C1 ‚Üî C2) - zgodnie z pseudokodem v1.6</text>
  <rect class="start-end" x="650" y="90" width="300" height="60"/>
  <text class="box-text" x="800" y="125" style="white-space: pre;">START - G≈Ç√≥wna pƒôtla</text>
  <text class="box-text-small" x="800" y="142" style="white-space: pre;">(co CYKL_PƒòTLI_ALGORYTM√ìW)</text>
  <line class="arrow" x1="800" y1="150" x2="800" y2="190"/>
  <rect class="warning" x="550" y="190" width="500" height="120"/>
  <text class="box-text-small" x="800" y="210" style="white-space: pre;">Zmienne (koordynacja z RN):</text>
  <text class="box-text-small" x="800" y="227" style="white-space: pre;">Globalne: aktualny_uk≈Çad, zmiana_uk≈Çadu_w_toku,</text>
  <text class="box-text-small" x="800" y="244" style="white-space: pre;">czas_ostatniej_zmiany_uk≈Çadu, rotacja_nagrzewnic_w_toku</text>
  <text class="box-text-small" x="800" y="261" style="white-space: pre;">Lokalne: czas_pracy_uk≈Çadu_podstawowego/ograniczonego,</text>
  <text class="box-text-small" x="800" y="278" style="white-space: pre;">czas_ostatniej_zmiany, last_update_time,</text>
  <text class="box-text-small" x="800" y="295" style="white-space: pre;">poprzedni_scenariusz</text>
  <line class="arrow" x1="800" y1="310" x2="800" y2="350"/>
  <rect class="process" x="600" y="350" width="400" height="70"/>
  <text class="box-text" x="800" y="375" style="white-space: pre;">KROK 0: Aktualizuj liczniki</text>
  <text class="box-text-small" x="800" y="395" style="white-space: pre;">delta_time = czas_systemowy - last_update_time</text>
  <text class="box-text-small" x="800" y="412" style="white-space: pre;">czas_pracy_[aktualny_uk≈Çad] += delta_time</text>
  <line class="arrow" x1="800" y1="420" x2="800" y2="465"/>
  <polygon class="decision" points="800,465 1050,515 800,565 550,515"/>
  <text class="box-text" x="800" y="505" style="white-space: pre;">KROK 1: Tryb MANUAL?</text>
  <line class="arrow-yes" x1="1050" y1="515" x2="1260.21" y2="515" style=""/>
  <text class="label" x="1100" y="505" style="white-space: pre;">TAK</text>
  <g transform="matrix(1, 0, 0, 1, -52.49139404296875, -0.6343879103660583)">
    <rect class="data" x="1314.54" y="485" width="235.461" height="60" style=""/>
    <text class="box-text-small" x="1429.36" y="500.864" style="white-space: pre; font-size: 13px;" transform="matrix(1, 0, 0, 1, 0.714462, 12.175124)">Rejestruj zdarzenie: <tspan x="1429.3599853515625" dy="1em">‚Äã</tspan>"Tryb MANUAL - operator kontroluje"</text>
  </g>
  <text class="box-text-small" x="1640.92" y="610.831" style="white-space: pre; font-size: 13px;">Czekaj na AUTO</text>
  <path class="arrow" d="M 1497.47 515 L 1587.05 515 L 1587.05 2290 L 950 2290" style=""/>
  <line class="arrow-no" x1="800" y1="565" x2="800" y2="625"/>
  <text class="label-no" x="820" y="595" style="white-space: pre;">NIE (AUTO)</text>
  <polygon class="decision" points="800,625 1050,675 800,725 550,675"/>
  <text class="box-text" x="800" y="665" style="white-space: pre;">KROK 2: Pierwsze uruchomienie?</text>
  <text class="box-text-small" x="800" y="682" style="white-space: pre;">(last_update_time = NULL)</text>
  <line class="arrow-yes" x1="1050" y1="675" x2="1264.78" y2="675" style=""/>
  <text class="label" x="1100" y="665" style="white-space: pre;">TAK</text>
  <g transform="matrix(1, 0, 0, 1, -10.569873809814453, -0.6336000561714172)">
    <rect class="process" x="1277.09" y="645.58" width="280" height="60"/>
    <text class="box-text-small" x="1421.39" y="664.366" style="white-space: pre; font-size: 13px;">Inicjalizuj zmienne:</text>
    <text class="box-text-small" x="1421.39" y="681.366" style="white-space: pre; font-size: 13px;">last_update_time = teraz</text>
    <text class="box-text-small" x="1421.39" y="698.366" style="white-space: pre; font-size: 13px;">poprzedni_scenariusz = S</text>
  </g>
  <path class="arrow" d="M 1506.84 705 L 1506.84 2272.21 L 950 2272.21" style=""/>
  <line class="arrow-no" x1="800" y1="725" x2="800" y2="785"/>
  <text class="label-no" x="820" y="755" style="white-space: pre;">NIE</text>
  <polygon class="decision" points="800,785 1100,845 800,905 500,845"/>
  <text class="box-text" x="800" y="830" style="white-space: pre;">KROK 3: Przej≈õcie z S0?</text>
  <text class="box-text-small" x="800" y="850" style="white-space: pre;">(poprzedni_scenariusz = S0 ORAZ</text>
  <text class="box-text-small" x="800" y="867" style="white-space: pre;">aktualny ‚àà {S1,S2,S3,S4})</text>
  <line class="arrow-yes" x1="1100" y1="845" x2="1267.46" y2="845" style=""/>
  <text class="label" x="1135.77" y="833.814" style="white-space: pre; font-size: 14px;">TAK</text>
  <g transform="matrix(1, 0, 0, 1, -25.999755859375, -1.3666250705718994)">
    <rect class="process" x="1293.4" y="815" width="179.241" height="60" style=""/>
    <text class="box-text-small" x="1385" y="835" style="white-space: pre;">Reset timestampu:</text>
    <text class="box-text-small" x="1385" y="852" style="white-space: pre;">czas_ostatniej_zmiany</text>
    <text class="box-text-small" x="1385" y="869" style="white-space: pre;">= czas_systemowy</text>
  </g>
  <path class="arrow" d="M 1359.47 875 L 1359.47 1014.01 L 1050 1014.01" style=""/>
  <line class="arrow-no" x1="800" y1="905" x2="800" y2="965"/>
  <text class="label-no" x="820" y="935" style="white-space: pre;">NIE</text>
  <text class="box-text-small" x="950" y="935" style="white-space: pre;">poprzedni_scenariusz = aktualny</text>
  <polygon class="decision" points="800,965 1050,1015 800,1065 550,1015"/>
  <text class="box-text" x="800" y="1005" style="white-space: pre;">KROK 4: Warunki rotacji?</text>
  <text class="box-text-small" x="800" y="1022" style="white-space: pre;">(S1-S4, C2 sprawny, AUTO)</text>
  <line class="arrow-no" x1="550" y1="1015" x2="462.391" y2="1015" style=""/>
  <text class="label-no" x="498.998" y="1002.77" style="white-space: pre; font-size: 14px;">NIE</text>
  <g transform="matrix(1, 0, 0, 1, 59.849124908447266, -0.7837469577789307)">
    <polygon class="decision" points="257.333 965.416 402.333 1015.42 257.333 1065.42 112.333 1015.42"/>
    <text class="box-text-small" x="257.333" y="1005.42" style="white-space: pre; font-size: 13px;">S1-S4 AND</text>
    <text class="box-text-small" x="257.333" y="1022.42" style="white-space: pre; font-size: 13px;">Ograniczony?</text>
  </g>
  <line class="arrow-yes" x1="316.468" y1="1065.43" x2="316.468" y2="1131.74" style=""/>
  <text class="label" x="272.403" y="1104.22" style="white-space: pre; font-size: 14px;">TAK</text>
  <rect class="action" x="200" y="1135.15" width="235" height="90" style=""/>
  <text class="box-text-small" style="font-size: 14px; white-space: pre;" x="317.5" y="1156.64">üö® AWARIA C2</text>
  <text class="box-text-small" style="font-size: 13px; white-space: pre;" x="317.5" y="1173.64">Alarm krytyczny:</text>
  <text class="box-text-small" style="font-size: 13px; white-space: pre;" x="317.5" y="1188.64">"Awaria C2 w uk≈Çadzie</text>
  <text class="box-text-small" style="font-size: 13px; white-space: pre;" x="317.5" y="1203.64">ograniczonym"</text>
  <text class="box-text-small" style="font-size: 13px; white-space: pre;" x="317.5" y="1218.64">Prze≈ÇƒÖcz na tryb MANUAL</text>
  <path class="arrow" d="M 317.5 1225.15 L 317.5 2230.26 L 647.581 2230.26" style=""/>
  <path class="arrow-no" d="M 177.522 1015.42 L 71.125 1015.42 L 71.125 2248.38 L 650.481 2248.38" style=""/>
  <text class="label-no" x="115.637" y="995.722" style="white-space: pre; font-size: 14px;">NIE</text>
  <text class="box-text-small" style="font-size: 14px; white-space: pre;" x="129.692" y="1033.65">S0/S5-S8</text>
  <line class="arrow-yes" x1="800" y1="1065" x2="800" y2="1125"/>
  <text class="label" x="820" y="1095" style="white-space: pre;">TAK</text>
  <polygon class="decision" points="800,1125 1040,1175 800,1225 560,1175"/>
  <text class="box-text" x="800" y="1165" style="white-space: pre;">KROK 5: Up≈ÇynƒÖ≈Ç okres?</text>
  <text class="box-text-small" x="800" y="1182" style="white-space: pre;">(czas ‚â• OKRES - HISTEREZA)</text>
  <path class="arrow-no" d="M 1022.79 1175 L 1441.74 1175 L 1441.74 2257.56 L 950 2257.56" style=""/>
  <text class="label-no" x="1200" y="1165" style="white-space: pre;">NIE</text>
  <line class="arrow-yes" x1="800" y1="1225" x2="800" y2="1285"/>
  <text class="label" x="820" y="1255" style="white-space: pre;">TAK</text>
  <rect class="process" x="650" y="1285" width="300" height="70"/>
  <text class="box-text" x="800" y="1310" style="white-space: pre;">KROK 6: Okre≈õl nowy uk≈Çad</text>
  <text class="box-text-small" x="800" y="1330" style="white-space: pre;">Podstawowy ‚Üî Ograniczony</text>
  <line class="arrow" x1="800" y1="1355" x2="800" y2="1410"/>
  <polygon class="decision" points="800,1410 1100,1470 800,1530 500,1470"/>
  <text class="box-text" x="800" y="1460" style="white-space: pre;">KROK 7: RN wykonuje rotacjƒô?</text>
  <text class="box-text-small" x="800" y="1477" style="white-space: pre;">(rotacja_nagrzewnic_w_toku)</text>
  <line class="arrow-yes" x1="1100" y1="1470" x2="1220.75" y2="1470" style=""/>
  <text class="label" x="1142.69" y="1455.65" style="white-space: pre; font-size: 14px;">TAK</text>
  <g transform="matrix(1, 0, 0, 1, -13.67866039276123, -0.6454430222511292)">
    <rect class="warning" x="1240.06" y="1439.96" width="180" height="60"/>
    <text class="box-text-small" x="1332.9" y="1465.57" style="white-space: pre; font-size: 13px;">Odrocz zmianƒô</text>
    <text class="box-text-small" x="1332.9" y="1482.57" style="white-space: pre; font-size: 13px;">(czekaj na RN)</text>
  </g>
  <path class="arrow" d="M 1323.82 1500 L 1323.82 2239.64 L 950 2239.64" style=""/>
  <line class="arrow-no" x1="800" y1="1530" x2="800" y2="1590"/>
  <text class="label-no" x="820" y="1560" style="white-space: pre;">NIE</text>
  <rect class="warning" x="650" y="1590" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1610" style="white-space: pre;">üîí Ustaw blokadƒô:</text>
  <text class="box-text-small" x="800" y="1627" style="white-space: pre;">zmiana_uk≈Çadu_w_toku = PRAWDA</text>
  <line class="arrow" x1="800" y1="1640" x2="800" y2="1680"/>
  <rect class="data" x="650" y="1680" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1700" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="800" y="1717" style="white-space: pre;">"Rozpoczƒôcie zmiany uk≈Çadu"</text>
  <line class="arrow" x1="800" y1="1730" x2="800" y2="1770"/>
  <rect class="action" x="600" y="1770" width="400" height="60"/>
  <text class="box-text" x="800" y="1795" style="white-space: pre;">Wykonaj_Zmianƒô_Uk≈Çadu()</text>
  <text class="box-text-small" x="800" y="1815" style="white-space: pre;">Sekwencja zmiany uk≈Çadu Podstawowy ‚Üî Ograniczony</text>
  <line class="arrow" x1="800" y1="1830" x2="800" y2="1880"/>
  <rect class="data" x="600" y="1880" width="400" height="90"/>
  <text class="box-text-small" x="800" y="1905" style="white-space: pre;">Aktualizuj zmienne:</text>
  <text class="box-text-small" x="800" y="1922" style="white-space: pre;">aktualny_uk≈Çad = nowy_uk≈Çad</text>
  <text class="box-text-small" x="800" y="1939" style="white-space: pre;">czas_ostatniej_zmiany = teraz</text>
  <text class="box-text-small" x="800" y="1956" style="white-space: pre;">czas_ostatniej_zmiany_uk≈Çadu = teraz (dla RN)</text>
  <line class="arrow" x1="800" y1="1970" x2="800" y2="2020"/>
  <rect class="data" x="650" y="2020" width="300" height="50"/>
  <text class="box-text-small" x="800" y="2040" style="white-space: pre;">Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="800" y="2057" style="white-space: pre;">"Zako≈Ñczono zmianƒô uk≈Çadu"</text>
  <line class="arrow" x1="800" y1="2070" x2="800" y2="2120"/>
  <rect class="warning" x="650" y="2120" width="300" height="50"/>
  <text class="box-text-small" x="800" y="2140" style="white-space: pre;">üîì Zwolnij blokadƒô:</text>
  <text class="box-text-small" x="800" y="2157" style="white-space: pre;">zmiana_uk≈Çadu_w_toku = FA≈ÅSZ</text>
  <line class="arrow" x1="800" y1="2170" x2="800" y2="2220"/>
  <rect class="process" x="650" y="2220" width="300" height="79.429" style=""/>
  <text class="box-text" x="804.671" y="2265.59" style="white-space: pre; font-size: 15px;">Czekaj CYKL_PƒòTLI_ALGORYTM√ìW</text>
  <path class="arrow" d="M 650 2261.62 L 47.095 2261.62 L 47.095 120 L 650 120" style=""/>
  <rect x="50" y="2350" width="1500" height="140" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text class="note" x="70" y="2370" style="white-space: pre;">Legenda:</text>
  <rect class="decision" x="170" y="2355" width="60" height="30"/>
  <text class="note" x="240" y="2373" style="white-space: pre;">Decyzja</text>
  <rect class="process" x="320" y="2355" width="60" height="30"/>
  <text class="note" x="390" y="2373" style="white-space: pre;">Proces</text>
  <rect class="action" x="470" y="2355" width="60" height="30"/>
  <text class="note" x="540" y="2373" style="white-space: pre;">Akcja zmiany</text>
  <rect class="data" x="630" y="2355" width="60" height="30"/>
  <text class="note" x="700" y="2373" style="white-space: pre;">Dane/Log</text>
  <rect class="warning" x="780" y="2355" width="60" height="30"/>
  <text class="note" x="850" y="2373" style="white-space: pre;">Blokada/Sync</text>
  <text class="note" x="70" y="2400" style="white-space: pre;">Parametry:</text>
  <text class="note" x="70" y="2415" style="white-space: pre;">OKRES_ROTACJI_UK≈ÅAD√ìW = parametr technologa (np. 168h = 7 dni)</text>
  <text class="note" x="70" y="2430" style="white-space: pre;">HISTEREZA_CZASOWA = 300s (5 minut) - bufor przed uznaniem up≈Çywu okresu</text>
  <text class="note" x="70" y="2445" style="white-space: pre;">CYKL_PƒòTLI_ALGORYTM√ìW = 60s (domy≈õlnie 1 min, zakres: 10s-600s)</text>
  <text class="note" x="70" y="2470" style="white-space: pre;">üîí Koordynacja z RN: blokady zapobiegajƒÖ jednoczesnej rotacji uk≈Çad√≥w i nagrzewnic</text>
  <text class="note" x="70" y="2485" style="white-space: pre;">Zgodno≈õƒá z pseudokodem v1.6 (src/algo_pseudokod.md, linia 756-988)</text>
  <text style="white-space: pre; fill: rgb(17, 17, 17); font-family: Arial, sans-serif; font-size: 14px; font-weight: 700;" x="1478.94" y="511.076"><tspan x="1478.93994140625" dy="1em">‚Äã</tspan></text>
</svg>