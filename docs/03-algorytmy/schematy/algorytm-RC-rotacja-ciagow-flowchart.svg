<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -1 1600 2720" width="1600px" height="2720px">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-yes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#28a745"/>
    </marker>
    <marker id="arrowhead-no" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
    <style>
  .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #1a1a1a; }
  .subtitle { font-family: Arial, sans-serif; font-size: 18px; fill: #555; }
  .box-text { font-family: Arial, sans-serif; font-size: 15px; fill: #1a1a1a; text-anchor: middle; }
  .box-text-small { font-family: Arial, sans-serif; font-size: 13px; fill: #1a1a1a; text-anchor: middle; }
  .box-label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #1a1a1a; }
  .decision { fill: #fff3cd; stroke: #ffc107; stroke-width: 2; }
  .process { fill: #d4edda; stroke: #28a745; stroke-width: 2; }
  .start-end { fill: #cce5ff; stroke: #0066cc; stroke-width: 3; rx: 25; }
  .action { fill: #f8d7da; stroke: #dc3545; stroke-width: 2; }
  .data { fill: #e7f3ff; stroke: #007bff; stroke-width: 2; }
  .warning { fill: #fff3cd; stroke: #ff8800; stroke-width: 2; }
  .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  .arrow-yes { stroke: #28a745; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-yes); }
  .arrow-no { stroke: #dc3545; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-no); }
  .label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #28a745; }
  .label-no { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #dc3545; }
  .note { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }
</style>
  </defs>
  <rect width="1600" height="2720" fill="#ffffff" y="-1"/>
  <text class="title" x="800" y="40" text-anchor="middle" style="white-space: pre;">Algorytm RC: Rotacja UkÅ‚adÃ³w Pracy CiÄ…gÃ³w</text>
  <text class="subtitle" x="800" y="65" text-anchor="middle" style="white-space: pre;">Podstawowy â†” Ograniczony (C1 â†” C2) z koordynacjÄ… RN</text>
  <rect class="start-end" x="650" y="90" width="300" height="60"/>
  <text class="box-text" x="800" y="125" style="white-space: pre;">START - GÅ‚Ã³wna pÄ™tla</text>
  <text class="box-text-small" x="800" y="142" style="white-space: pre;">(co CYKL_PÄ˜TLI, domyÅ›lnie 60s)</text>
  <line class="arrow" x1="800" y1="150" x2="800" y2="186.672" style=""/>
  <rect class="warning" x="600" y="190" width="400" height="90"/>
  <text class="box-text-small" x="800" y="210" style="white-space: pre;">âš™ï¸ Zmienne globalne (koordynacja z RN):</text>
  <text class="box-text-small" x="800" y="227" style="white-space: pre;">aktualny_ukÅ‚ad, zmiana_ukÅ‚adu_w_toku,</text>
  <text class="box-text-small" x="800" y="244" style="white-space: pre;">czas_ostatniej_zmiany_ukÅ‚adu,</text>
  <text class="box-text-small" x="800" y="261" style="white-space: pre;">rotacja_nagrzewnic_w_toku</text>
  <line class="arrow" x1="800" y1="280" x2="800" y2="326.672" style=""/>
  <text class="box-label" x="50" y="375" style="white-space: pre;">KROK 1</text>
  <polygon class="decision" points="800,330 1050,400 800,470 550,400"/>
  <text class="box-text" x="800" y="390" style="white-space: pre;">Czy warunki rotacji</text>
  <text class="box-text" x="800" y="410" style="white-space: pre;">speÅ‚nione?</text>
  <text class="box-text-small" x="800" y="430" style="white-space: pre;">(S1-S4, C2 sprawny, AUTO)</text>
  <line class="arrow-yes" x1="800" y1="470" x2="800" y2="530"/>
  <text class="label" x="820" y="500" style="white-space: pre;">TAK</text>
  <line class="arrow-no" x1="550" y1="400" x2="350" y2="400"/>
  <text class="label-no" x="420" y="390" style="white-space: pre;">NIE</text>
  <rect class="action" x="200" y="370" width="150" height="60"/>
  <text class="box-text-small" x="275" y="395" style="white-space: pre;">JeÅ›li ukÅ‚ad</text>
  <text class="box-text-small" x="275" y="412" style="white-space: pre;">= Ograniczony:</text>
  <text class="box-text-small" x="275" y="429" style="white-space: pre;">â†’ Podstawowy</text>
  <line class="arrow-no" x1="199.53" y1="400" x2="146.93" y2="400"/>
  <line class="arrow-no" x1="149" y1="400" x2="149" y2="2515.11" style=""/>
  <line class="arrow-no" x1="147.857" y1="2512.12" x2="648.857" y2="2512.12"/>
  <text class="box-label" x="50" y="555" style="white-space: pre;">KROK 2</text>
  <polygon class="decision" points="800,530 1020,590 800,650 580,590"/>
  <text class="box-text" x="800" y="580" style="white-space: pre;">UpÅ‚ynÄ…Å‚</text>
  <text class="box-text" x="800" y="600" style="white-space: pre;">OKRES_ROTACJI?</text>
  <line class="arrow-yes" x1="800" y1="650" x2="800" y2="710"/>
  <text class="label" x="820" y="680" style="white-space: pre;">TAK</text>
  <line class="arrow-no" x1="1020" y1="590" x2="1557.69" y2="590" style=""/>
  <text class="label-no" x="1200" y="580" style="white-space: pre;">NIE</text>
  <line class="arrow-no" x1="1558.05" y1="588.28" x2="1558.05" y2="2530.23" style=""/>
  <line class="arrow-no" x1="1558.23" y1="2531.54" x2="949.545" y2="2531.54" style=""/>
  <text class="box-label" x="50" y="735" style="white-space: pre;">KROK 3</text>
  <rect class="process" x="650" y="710" width="300" height="80"/>
  <text class="box-text" x="800" y="740" style="white-space: pre;">OkreÅ›l nowy ukÅ‚ad:</text>
  <text class="box-text-small" x="800" y="760" style="white-space: pre;">JeÅ›li Podstawowy â†’ Ograniczony</text>
  <text class="box-text-small" x="800" y="780" style="white-space: pre;">JeÅ›li Ograniczony â†’ Podstawowy</text>
  <line class="arrow" x1="800" y1="790" x2="800" y2="848.896" style=""/>
  <text class="box-label" x="50" y="885" style="white-space: pre;">KROK 4</text>
  <polygon class="decision" points="800,850 1100,920 800,990 500,920"/>
  <text class="box-text" x="800" y="905" style="white-space: pre;">Czy RN wykonuje</text>
  <text class="box-text" x="800" y="925" style="white-space: pre;">rotacjÄ™ nagrzewnic?</text>
  <text class="box-text-small" x="800" y="945" style="white-space: pre;">(rotacja_nagrzewnic_w_toku)</text>
  <line class="arrow-yes" x1="1100" y1="920" x2="1365.16" y2="920" style=""/>
  <text class="label" x="1180" y="910" style="white-space: pre;">TAK</text>
  <rect class="warning" x="1368.83" y="890.368" width="180" height="60"/>
  <text class="box-text-small" x="1454.35" y="916.214" style="white-space: pre; font-size: 13px;">Odrocz zmianÄ™</text>
  <text class="box-text-small" x="1454.35" y="933.214" style="white-space: pre; font-size: 13px;">(RN rotuje)</text>
  <line class="arrow" x1="1460.87" y1="952.843" x2="1460.87" y2="2516.87" style=""/>
  <line class="arrow" x1="1458.75" y1="2515.66" x2="952.158" y2="2515.66" style=""/>
  <line class="arrow-no" x1="800" y1="990" x2="800" y2="1050"/>
  <text class="label-no" x="820" y="1020" style="white-space: pre;">NIE</text>
  <polygon class="decision" points="800,1060 1000,1110 800,1160 600,1110"/>
  <text class="box-text" x="800" y="1100" style="white-space: pre;">Rotacja moÅ¼liwa</text>
  <text class="box-text" x="800" y="1120" style="white-space: pre;">i wymagana?</text>
  <line class="arrow-no" x1="1000" y1="1110" x2="1427.93" y2="1110" style=""/>
  <text class="label-no" x="1150" y="1100" style="white-space: pre;">NIE</text>
  <line class="arrow-no" x1="1426.71" y1="1107.52" x2="1426.71" y2="2494.44" style=""/>
  <line class="arrow-no" x1="1426.68" y1="2496.18" x2="949.569" y2="2496.18" style=""/>
  <line class="arrow-yes" x1="800" y1="1160" x2="800" y2="1220"/>
  <text class="label" x="820" y="1190" style="white-space: pre;">TAK</text>
  <rect class="warning" x="650" y="1230" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1250" style="white-space: pre;">ğŸ”’ Ustaw blokadÄ™:</text>
  <text class="box-text-small" x="800" y="1267" style="white-space: pre;">zmiana_ukÅ‚adu_w_toku = PRAWDA</text>
  <line class="arrow" x1="800" y1="1280" x2="800" y2="1320"/>
  <rect class="data" x="650" y="1330" width="300" height="50"/>
  <text class="box-text-small" x="800" y="1355" style="white-space: pre;">ğŸ“ Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="800" y="1372" style="white-space: pre;">"RozpoczÄ™cie zmiany ukÅ‚adu"</text>
  <line class="arrow" x1="800" y1="1380" x2="800" y2="1420"/>
  <rect class="action" x="600" y="1430" width="400" height="60"/>
  <text class="box-text" x="800" y="1455" style="white-space: pre;">âš™ï¸ Wykonaj_ZmianÄ™_UkÅ‚adu()</text>
  <text class="box-text-small" x="800" y="1475" style="white-space: pre;">(szczegÃ³Å‚y poniÅ¼ej)</text>
  <line class="arrow" x1="800" y1="1490" x2="800" y2="1530"/>
  <line class="arrow" x1="800" y1="1530" x2="401.222" y2="1598.55" style=""/>
  <line class="arrow" x1="800" y1="1530" x2="1200" y2="1598.55" style=""/>
  <rect class="action" x="200" y="1600" width="400" height="40"/>
  <text class="box-text" x="400" y="1625" style="white-space: pre;">ğŸ”„ Podstawowy â†’ Ograniczony</text>
  <line class="arrow" x1="400" y1="1641.19" x2="400" y2="1964.83" style=""/>
  <rect class="process" x="220" y="1670" width="360" height="30"/>
  <text class="box-text-small" x="400" y="1690" style="white-space: pre;">1. Zatrzymaj ciÄ…g 1 (W1, RN wybiera)</text>
  <rect class="process" x="220" y="1720" width="360" height="30"/>
  <text class="box-text-small" x="400" y="1740" style="white-space: pre;">2. OtwÃ³rz spinÄ™ ciÄ…gÃ³w</text>
  <rect class="process" x="220" y="1770" width="360" height="30"/>
  <text class="box-text-small" x="400" y="1790" style="white-space: pre;">3. Zamknij przepustnice C1</text>
  <rect class="process" x="220" y="1820" width="360" height="30"/>
  <text class="box-text-small" x="400" y="1840" style="white-space: pre;">4. Uruchom ciÄ…g 2 (W2, RN wybiera)</text>
  <rect class="process" x="220" y="1870" width="360" height="30"/>
  <text class="box-text-small" x="400" y="1890" style="white-space: pre;">5. Aktywuj PID dla W2 (Ts=2Â°C)</text>
  <rect class="action" x="1000" y="1600" width="400" height="40"/>
  <text class="box-text" x="1200" y="1625" style="white-space: pre;">ğŸ”„ Ograniczony â†’ Podstawowy</text>
  <line class="arrow" x1="1200" y1="1641.19" x2="1200" y2="1965.11" style=""/>
  <rect class="process" x="1020" y="1670" width="360" height="30"/>
  <text class="box-text-small" x="1200" y="1690" style="white-space: pre;">1. Zatrzymaj ciÄ…g 2 (W2, RN wybiera)</text>
  <rect class="process" x="1020" y="1720" width="360" height="30"/>
  <text class="box-text-small" x="1200" y="1740" style="white-space: pre;">2. Zamknij spinÄ™ ciÄ…gÃ³w</text>
  <rect class="process" x="1020" y="1770" width="360" height="30"/>
  <text class="box-text-small" x="1200" y="1790" style="white-space: pre;">3. OtwÃ³rz przepustnice C1</text>
  <rect class="process" x="1020" y="1820" width="360" height="30"/>
  <text class="box-text-small" x="1200" y="1840" style="white-space: pre;">4. Uruchom ciÄ…g 1 (W1, RN wybiera)</text>
  <rect class="process" x="1020" y="1870" width="360" height="30"/>
  <text class="box-text-small" x="1200" y="1890" style="white-space: pre;">5. Aktywuj PID dla W1 (Ts=2Â°C)</text>
  <line class="arrow" x1="401.248" y1="1964.99" x2="796.753" y2="1964.99" style=""/>
  <line class="arrow" x1="1201.9" y1="1964.85" x2="800.012" y2="1964.85" style=""/>
  <line class="arrow" x1="799" y1="1964.07" x2="799" y2="2018.62" style=""/>
  <rect class="data" x="600" y="2020" width="400" height="90"/>
  <text class="box-text-small" x="800" y="2045" style="white-space: pre;">Aktualizuj zmienne:</text>
  <text class="box-text-small" x="800" y="2062" style="white-space: pre;">aktualny_ukÅ‚ad = nowy_ukÅ‚ad</text>
  <text class="box-text-small" x="800" y="2079" style="white-space: pre;">czas_ostatniej_zmiany = teraz</text>
  <text class="box-text-small" x="800" y="2096" style="white-space: pre;">czas_ostatniej_zmiany_ukÅ‚adu = teraz (dla RN)</text>
  <line class="arrow" x1="800" y1="2110" x2="800" y2="2160"/>
  <rect class="data" x="650" y="2170" width="300" height="50"/>
  <text class="box-text-small" x="800" y="2195" style="white-space: pre;">ğŸ“ Rejestruj zdarzenie:</text>
  <text class="box-text-small" x="800" y="2212" style="white-space: pre;">"ZakoÅ„czono zmianÄ™ ukÅ‚adu"</text>
  <line class="arrow" x1="800" y1="2220" x2="800" y2="2260"/>
  <rect class="warning" x="650" y="2270" width="300" height="50"/>
  <text class="box-text-small" x="800" y="2290" style="white-space: pre;">ğŸ”“ Zwolnij blokadÄ™:</text>
  <text class="box-text-small" x="800" y="2307" style="white-space: pre;">zmiana_ukÅ‚adu_w_toku = FAÅSZ</text>
  <line class="arrow" x1="800" y1="2320" x2="800" y2="2360"/>
  <text class="box-label" x="50" y="2385" style="white-space: pre;">KROK 5</text>
  <polygon class="decision" points="800,2370 1020,2420 800,2470 580,2420"/>
  <text class="box-text" x="800" y="2410" style="white-space: pre;">aktualny_ukÅ‚ad</text>
  <text class="box-text" x="800" y="2430" style="white-space: pre;">= Podstawowy?</text>
  <line class="arrow-yes" x1="580" y1="2420" x2="450" y2="2420"/>
  <text class="label" x="480" y="2410" style="white-space: pre;">TAK</text>
  <rect class="data" x="250" y="2390" width="200" height="60"/>
  <text class="box-text-small" x="350" y="2415" style="white-space: pre;">czas_pracy_</text>
  <text class="box-text-small" x="350" y="2432" style="white-space: pre;">ukÅ‚adu_podstawowego</text>
  <text class="box-text-small" x="350" y="2449" style="white-space: pre;">+= 1</text>
  <line class="arrow" x1="350" y1="2450" x2="350" y2="2490"/>
  <line class="arrow" x1="350" y1="2490" x2="650" y2="2490"/>
  <line class="arrow-no" x1="1020" y1="2420" x2="1104.77" y2="2420" style=""/>
  <text class="label-no" x="1050" y="2410" style="white-space: pre;">NIE</text>
  <rect class="data" x="1108.88" y="2387.1" width="200" height="60"/>
  <text class="box-text-small" x="1208.88" y="2412.1" style="white-space: pre; font-size: 13px;">czas_pracy_</text>
  <text class="box-text-small" x="1208.88" y="2429.1" style="white-space: pre; font-size: 13px;">ukÅ‚adu_ograniczonego</text>
  <text class="box-text-small" x="1208.88" y="2446.1" style="white-space: pre; font-size: 13px;">+= 1</text>
  <line class="arrow" x1="1210.11" y1="2447.94" x2="1210.11" y2="2480.13" style=""/>
  <line class="arrow" x1="1211.74" y1="2479.72" x2="949.984" y2="2479.72" style=""/>
  <rect class="process" x="650.396" y="2478.33" width="300" height="66.291" style=""/>
  <text class="box-text" x="799.996" y="2517.44" style="white-space: pre; font-size: 15px;">Czekaj CYKL_PÄ˜TLI</text>
  <line class="arrow" x1="649.565" y1="2531.1" x2="111.899" y2="2531.1" style=""/>
  <line class="arrow" x1="111.62" y1="2531.22" x2="111.62" y2="119.243" style=""/>
  <line class="arrow" x1="111.12" y1="120" x2="650" y2="120" style=""/>
  <rect x="50" y="2550" width="1500" height="70" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text class="note" x="70" y="2570" style="white-space: pre;">Legenda:</text>
  <rect class="decision" x="170" y="2555" width="60" height="30"/>
  <text class="note" x="240" y="2573" style="white-space: pre;">Decyzja</text>
  <rect class="process" x="320" y="2555" width="60" height="30"/>
  <text class="note" x="390" y="2573" style="white-space: pre;">Proces</text>
  <rect class="action" x="470" y="2555" width="60" height="30"/>
  <text class="note" x="540" y="2573" style="white-space: pre;">Akcja zmiany</text>
  <rect class="data" x="630" y="2555" width="60" height="30"/>
  <text class="note" x="700" y="2573" style="white-space: pre;">Dane/Log</text>
  <rect class="warning" x="780" y="2555" width="60" height="30"/>
  <text class="note" x="850" y="2573" style="white-space: pre;">Blokada/Sync</text>
  <text class="note" x="70" y="2600" style="white-space: pre;">âš™ï¸ OKRES_ROTACJI_UKÅADÃ“W = parametr technologa (np. 168h = 7 dni)</text>
  <text class="note" x="70" y="2615" style="white-space: pre;">â±ï¸ CYKL_PÄ˜TLI_ALGORYTMÃ“W = czÄ™stoÅ›Ä‡ sprawdzania (domyÅ›lnie 60s = 1 min, zakres: 10s-600s)</text>
  <text class="note" x="70" y="2630" style="white-space: pre;">ğŸ”’ Koordynacja z Algorytmem RN: blokady zapobiegajÄ… jednoczesnej rotacji ukÅ‚adÃ³w i nagrzewnic</text>
</svg>