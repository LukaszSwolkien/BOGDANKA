test_profiles:
  - id: profile_reset
    name: TEST_RESET
    priority: MEDIUM
    description: reset metryk
    duration_days: 1
    acceleration: 10000 
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 5.0}  
      - {day_start: 1, day_end: 2, temperature_c: 5.0}  



  - id: profile_s0
    name: TEST_S0_WARMUP
    priority: MEDIUM
    description: Rozruch z S0 - reset statystyk RN
    duration_days: 2
    acceleration: 1000 
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 5.0}  
      - {day_start: 1, day_end: 2, temperature_c: -5.0}  
    expected_results:
      heater_balance_c1: {max: 1.5}  
      heater_balance_c2: {max: 1.5}  

  - id: profile_s1
    name: TEST_S1
    priority: MEDIUM
    description: S1 - minimalne ogrzewanie, maksymalna rotacja
    duration_days: 1
    acceleration: 1000  
    profile_type: constant
    temperature_c: 0.0
    expected_scenario: S1
    expected_results:
      heater_balance_c1: {max: 1.3}  # N1-N4: rotacja 1/4 -> dobry balans mimo rotacji
      heater_balance_c2: {max: 1.3}  # N5-N8: rotacja 1/4 -> dobry balans mimo rotacji

  - id: profile_s3
    name: TEST_S3
    priority: HIGH
    description: Stale warunki S3 - rotacja RN w jednym ciągu
    duration_days: 2
    acceleration: 1000  
    profile_type: constant
    temperature_c: -5.0
    expected_scenario: S3
    expected_results:
      heater_balance_c1: {max: 1.5}  # S3: 3/4 nagrzewnic w C1, rotacja -> max 50% różnicy
      heater_balance_c2: {max: 1.5}  # S3: 3/4 nagrzewnic w C2 (albo C1), rotacja -> max 50% różnicy

  - id: profile_s4
    name: TEST_S4
    priority: MEDIUM
    description: S4 - pełna moc jednego ciągu, brak rotacji
    duration_days: 2
    acceleration: 1000  # 15 days @ 1000x = ~22 minutes
    profile_type: constant
    temperature_c: -9.0
    expected_scenario: S4
    expected_results:
      heater_balance_c1: {max: 1.1}  # N1-N4 lub N5-N8: ~100% każda -> ratio ~1.0
      heater_balance_c2: {max: 1.1}  # Drugi ciąg nieaktywny lub równo obciążony

  - id: profile_s6
    name: TEST_S6
    priority: HIGH
    description: S6 - oba ciągi aktywne, asymetria obciążenia
    duration_days: 2
    acceleration: 1000 
    profile_type: constant
    temperature_c: -16.0
    expected_scenario: S6
    expected_results:
      heater_balance_c1: {max: 1.1}  # N1-N4: ~100% uptime każda -> idealny balans
      heater_balance_c2: {max: 1.3}  # N5-N8: rotacja 2/4 -> akceptowalny balans

  - id: profile_s1363
    name: TEST_SCENARIO_TRANSITIONS
    priority: HIGH
    description: Przejścia S1→S3→S6→S3
    duration_days: 4
    acceleration: 1000  
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 0.0}    # S1
      - {day_start: 1, day_end: 2, temperature_c: -5.0}   # S3
      - {day_start: 2, day_end: 3, temperature_c: -16.0}  # S6
      - {day_start: 3, day_end: 4, temperature_c: -5.0}   # S3
    expected_results:
      # Mimo zmian scenariuszowych (S1→S3→S6→S3), balans powinien być zachowany
      heater_balance_c1: {max: 1.5}  # Rotacje podczas S1 i S3, stałe podczas S6
      heater_balance_c2: {max: 1.5}  # Rotacje podczas S1, S3, i częściowo S6

  - id: profile_zima
    name: UNSTABLE_WINTER
    priority: MEDIUM
    description: Niestabilna zima - ekstremalny test RN
    duration_days: 15
    acceleration: 1000  
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 0.0}    # S1 (1d)
      - {day_start: 1, day_end: 2, temperature_c: -3.0}   # S2 (1d)
      - {day_start: 2, day_end: 3, temperature_c: -5.0}   # S3 (1d)
      - {day_start: 3, day_end: 4, temperature_c: -8.0}   # S4 (1d)
      - {day_start: 4, day_end: 5, temperature_c: -10.0}  # S4 (1d)
      - {day_start: 5, day_end: 6, temperature_c: -13.0}  # S5 (1d)
      - {day_start: 6, day_end: 7, temperature_c: -11.0}  # S5 (1d)
      - {day_start: 7, day_end: 8, temperature_c: -9.0}   # S4 (1d)
      - {day_start: 8, day_end: 9, temperature_c: -6.0}   # S3 (1d)
      - {day_start: 9, day_end: 10, temperature_c: -3.0}  # S2 (1d)
      - {day_start: 10, day_end: 11, temperature_c: 4.0}  # S0 (1d) - reset!
      - {day_start: 11, day_end: 13, temperature_c: -5.0} # S3 (2d)
      - {day_start: 13, day_end: 14, temperature_c: -2.0} # S2 (1d)
      - {day_start: 14, day_end: 15, temperature_c: 0.0}  # S1 (1d)
    expected_results:
      # Test ekstremalny: częste zmiany S1-S5, reset przez S0
      # Mimo to balans powinien być zachowany (algorytm RN musi być odporny)
      heater_balance_c1: {max: 1.8}  # Wyższa tolerancja dla niestabilnych warunków
      heater_balance_c2: {max: 1.8}  # Wyższa tolerancja dla niestabilnych warunków

