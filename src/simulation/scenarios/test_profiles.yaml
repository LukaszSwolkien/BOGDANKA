test_profiles:
  - id: profile_reset
    name: TEST_RESET
    priority: MEDIUM
    description: reset metryk
    duration_days: 1
    acceleration: 10000 
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 5.0}  
      - {day_start: 1, day_end: 2, temperature_c: 5.0}  
    expected_results:
      heater_balance_c1: {max: 1.5}
      heater_balance_c2: {max: 1.5}

  - id: profile_s0
    name: TEST_S0_WARMUP
    priority: MEDIUM
    description: Rozruch z S0 - reset statystyk RN
    duration_days: 2
    acceleration: 1000 
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 5.0}  
      - {day_start: 1, day_end: 2, temperature_c: -5.0}  
    expected_results:
      heater_balance_c1: {max: 1.5}  
      heater_balance_c2: {max: 1.5}  

  - id: profile_s1
    name: TEST_S1
    priority: MEDIUM
    description: S1 - minimalne ogrzewanie, maksymalna rotacja
    duration_days: 1
    acceleration: 1000  
    profile_type: constant
    temperature_c: 0.0
    expected_scenario: S1
    expected_results:
      heater_balance_c1: {max: 1.3}  # N1-N4: rotacja 1/4 -> dobry balans mimo rotacji
      heater_balance_c2: {max: 1.3}  # N5-N8: rotacja 1/4 -> dobry balans mimo rotacji

  - id: profile_s3
    name: TEST_S3
    priority: HIGH
    description: Stale warunki S3 - rotacja RN w jednym ciągu
    duration_days: 2
    acceleration: 1000  
    profile_type: constant
    temperature_c: -5.0
    expected_scenario: S3
    expected_results:
      heater_balance_c1: {max: 1.5}  # S3: 3/4 nagrzewnic w C1, rotacja -> max 50% różnicy
      heater_balance_c2: {max: 1.5}  # S3: 3/4 nagrzewnic w C2 (albo C1), rotacja -> max 50% różnicy

  - id: profile_s4
    name: TEST_S4
    priority: MEDIUM
    description: S4 - pełna moc jednego ciągu, brak rotacji
    duration_days: 2
    acceleration: 1000  # 15 days @ 1000x = ~22 minutes
    profile_type: constant
    temperature_c: -9.0
    expected_scenario: S4
    expected_results:
      heater_balance_c1: {max: 1.1}  # N1-N4 lub N5-N8: ~100% każda -> ratio ~1.0
      heater_balance_c2: {max: 1.1}  # Drugi ciąg nieaktywny lub równo obciążony

  - id: profile_s6
    name: TEST_S6
    priority: HIGH
    description: S6 - oba ciągi aktywne, asymetria obciążenia
    duration_days: 2
    acceleration: 1000 
    profile_type: constant
    temperature_c: -16.0
    expected_scenario: S6
    expected_results:
      heater_balance_c1: {max: 1.1}  # N1-N4: ~100% uptime każda -> idealny balans
      heater_balance_c2: {max: 1.3}  # N5-N8: rotacja 2/4 -> akceptowalny balans

  - id: profile_s1363
    name: TEST_SCENARIO_TRANSITIONS
    priority: HIGH
    description: Przejścia S1→S3→S6→S3
    duration_days: 4
    acceleration: 1000  
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 0.0}    # S1
      - {day_start: 1, day_end: 2, temperature_c: -5.0}   # S3
      - {day_start: 2, day_end: 3, temperature_c: -16.0}  # S6
      - {day_start: 3, day_end: 4, temperature_c: -5.0}   # S3
    expected_results:
      # Mimo zmian scenariuszowych (S1→S3→S6→S3), balans powinien być zachowany
      heater_balance_c1: {max: 1.5}  # Rotacje podczas S1 i S3, stałe podczas S6
      heater_balance_c2: {max: 1.5}  # Rotacje podczas S1, S3, i częściowo S6

  - id: profile_niestabilna_zima
    name: UNSTABLE_WINTER
    priority: MEDIUM
    description: Niestabilna zima - ekstremalny test RN
    duration_days: 15
    acceleration: 1000  
    profile_type: stepped
    steps:
      - {day_start: 0, day_end: 1, temperature_c: 0.0}    # S1 (1d)
      - {day_start: 1, day_end: 2, temperature_c: -3.0}   # S2 (1d)
      - {day_start: 2, day_end: 3, temperature_c: -5.0}   # S3 (1d)
      - {day_start: 3, day_end: 4, temperature_c: -8.0}   # S4 (1d)
      - {day_start: 4, day_end: 5, temperature_c: -10.0}  # S4 (1d)
      - {day_start: 5, day_end: 6, temperature_c: -13.0}  # S5 (1d)
      - {day_start: 6, day_end: 7, temperature_c: -11.0}  # S5 (1d)
      - {day_start: 7, day_end: 8, temperature_c: -9.0}   # S4 (1d)
      - {day_start: 8, day_end: 9, temperature_c: -6.0}   # S3 (1d)
      - {day_start: 9, day_end: 10, temperature_c: -3.0}  # S2 (1d)
      - {day_start: 10, day_end: 11, temperature_c: 4.0}  # S0 (1d) - reset!
      - {day_start: 11, day_end: 13, temperature_c: -5.0} # S3 (2d)
      - {day_start: 13, day_end: 14, temperature_c: -2.0} # S2 (1d)
      - {day_start: 14, day_end: 15, temperature_c: 0.0}  # S1 (1d)
    expected_results:
      # Test ekstremalny: częste zmiany S1-S5, reset przez S0
      # Mimo to balans powinien być zachowany (algorytm RN musi być odporny)
      heater_balance_c1: {max: 1.8}  # Wyższa tolerancja dla niestabilnych warunków
      heater_balance_c2: {max: 1.8}  # Wyższa tolerancja dla niestabilnych warunków

  - id: profile_zima
    name: WINTER_PROFILE
    priority: HIGH
    description: Pełny cykl zimowy 28 dni - profil demo prezentacji
    duration_days: 28
    acceleration: 2000  # 28 dni @ 2000x = ~20 minut
    profile_type: smooth_step  # Płynne przejścia temperatur (realistyczne)
    # SMOOTH_STEP: temperatura zmienia się LINIOWO między krokami
    # - Krok 1: stała temperatura (brak interpolacji)
    # - Kolejne kroki: rampa z poprzedniej temp. do docelowej
    # Przykład: krok {2,5,-6.0} → temperatura liniowo -1°C → -6°C w dniach 2-5
    steps:
      # TYDZIEŃ 1: 0°C → -8°C (S1→S2→S3→S4, wzrost mocy)
      - {day_start: 0, day_end: 2, temperature_c: 0.0}   # S1 (dni 0-2)
      - {day_start: 2, day_end: 4, temperature_c: -2.0}   # S1/S2 (dni 2-4)
      - {day_start: 4, day_end: 5, temperature_c: -5.0}   # S2/S3 (dni 4-5)
      - {day_start: 5, day_end: 7, temperature_c: -9.0}   # S3/S4 (dni 5-7)
      
      # TYDZIEŃ 2: -10°C → -18°C (S4→S5→S6, uruchomienie C2!)
      - {day_start: 7, day_end: 9, temperature_c: -10.0}  # S4 (dni 7-9)
      - {day_start: 9, day_end: 11, temperature_c: -13.0} # S5 (dni 9-11) ← URUCHOMIENIE C2
      - {day_start: 11, day_end: 14, temperature_c: -18.0} # S6 (dni 11-14)
      
      # TYDZIEŃ 3: -18°C → -25°C (S6→S7→S8, maksymalne obciążenie)
      - {day_start: 14, day_end: 16, temperature_c: -19.0} # S7 (dni 14-16)
      - {day_start: 16, day_end: 21, temperature_c: -22.0} # S8 (dni 16-21) ← MAKSYMALNE OBCIĄŻENIE
      
      # TYDZIEŃ 4: -25°C → -5°C (S8→...→S3, powrót)
      - {day_start: 21, day_end: 23, temperature_c: -20.0} # S7 (dni 21-23)
      - {day_start: 23, day_end: 25, temperature_c: -15.0} # S6/S5 (dni 23-25)
      - {day_start: 25, day_end: 27, temperature_c: -9.0}  # S4 (dni 25-27)
      - {day_start: 27, day_end: 28, temperature_c: -5.0}  # S3 (dzień 27-28)
    expected_results:
      # Pełny cykl zimowy - wszystkie scenariusze S0-S8
      heater_balance_c1: {min: 1.0, max: 1.2}  # Doskonały balans C1 (N1-N4)
      heater_balance_c2: {min: 1.0, max: 1.2}  # Doskonały balans C2 (N5-N8)

